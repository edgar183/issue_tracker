{% extends 'base.html'%} {% block content %} {% include 'base/js.html' %}
<div class="row pl-4">
  <h1>Issues Report</h1>
</div>

<div class="row">
  <div id="completed_daily_container" class="col s12 m4"></div>
  <div id="completed_weekly_container" class="col s12 m4"></div>
  <div id="completed_monthly_container" class="col s12 m4"></div>
</div>
<div class="row">
  <div id="bug_upvotes_container" class="col s12 m6" data-url="{% url 'get_bug_upvotes_json' %}">
    <canvas id="bugPieChart"></canvas>
  </div>
  <div id="feature_upvotes_container" class="col s12 m6" data-url="{% url 'get_feature_upvotes_json' %}">
    <canvas id="featurePieChart"></canvas>
  </div>
</div>

<div id="bug_status_container" data-url="{% url 'get_bug_status_json' %}"></div>
<div id="feature_status_container" data-url="{% url 'get_feature_status_json' %}"></div>

<script>
  $.ajax({
    method: "GET",
    url: $("#bug_upvotes_container").attr("data-url"),
    dataType: 'json',
    success: function (data) {
      lables = data.lables
      status_count = data.count
      console.log(data)
      var ctx = document.getElementById('bugPieChart').getContext('2d');
      var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: lables,
          datasets: [{
            label: '# of Votes',
            data: status_count,
            backgroundColor: [
              'rgb(239, 9, 9, 0.5)',
              'rgb(150, 132, 16, 0.5)',
              'rgb(11, 91, 14, 0.5)'
            ],
            borderWidth: 2
          }]
        },
        options: {
          title: {
            display: true,
            text: 'Bug Status',
            position: 'bottom',
            fontSize: 16
          }
        }
      });
    },
    error: function (error_data) {
      console.log("error")
      console.log(error_data)
    }

  });

  $.ajax({
    method: "GET",
    url: $("#feature_upvotes_container").attr("data-url"),
    dataType: 'json',
    success: function (data) {
      lables = data.lables
      status_count = data.count
      console.log(data)
      var ctx = document.getElementById('featurePieChart').getContext('2d');
      var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: lables,
          datasets: [{
            label: '# of Votes',
            data: status_count,
            backgroundColor: [
              'rgb(239, 9, 9, 0.5)',
              'rgb(150, 132, 16, 0.5)',
              'rgb(11, 91, 14, 0.5)'
            ],
            borderWidth: 2
          }]
        },
        options: {
          title: {
            display: true,
            text: 'Feature Status',
            position: 'bottom',
            fontSize: 16
          }
        }
      });
    },
    error: function (error_data) {
      console.log("error")
      console.log(error_data)
    }

  });
  
  //   $.ajax({
  //     url: $("#bug_status_container").attr("data-url"),
  //     dataType: 'json',
  //     success: function (data) {
  //       Highcharts.chart("bug_status_container", data);
  //     }
  //   });
  //  $.ajax({
  //     url: $("#feature_status_container").attr("data-url"),
  //     dataType: 'json',
  //     success: function (data) {
  //       Highcharts.chart("feature_status_container", data);
  //     }
  //   });

        // $.ajax({
        //   url: $("#feature_upvotes_container").attr("data-url"),
        //   dataType: 'json',
        //   success: function (data) {
        //     Highcharts.chart("feature_upvotes_container", data);
        //   }
        // });
        // $(document).ready(function() {

        //     var chart = new Highcharts.Chart({
        //             chart: {
        //                 renderTo: 'completed_daily_container',
        //                 type: 'pie',
        //                 backgroundColor:'transparent',

        //             },
        //             plotOptions: {
        //                 pie: {
        //                     innerSize: '70%'
        //                 }
        //             },
        //             title: {
        //                 text: 'Issues Resolved Today:',
        //                 style: { 'color': 'black' }

        //             },
        //             subtitle: {
        //                 text: '{{completed_daily}}',
        //                 align: 'center',
        //                 verticalAlign: 'middle',
        //                 style: { "fontSize": "10em", 'color': 'black' },
        //                 y: 15
        //             },
        //             credits: { enabled: false },

        //         });
        //   });

        //   $(document).ready(function() {

        //     var chart = new Highcharts.Chart({
        //             chart: {
        //                 renderTo: 'completed_weekly_container',
        //                 type: 'pie',
        //                 backgroundColor:'transparent',

        //             },
        //             plotOptions: {
        //                 pie: {
        //                     innerSize: '70%'
        //                 }
        //             },
        //             title: {
        //                 text: 'Issues Resolved in the past 7 days:',
        //                 style: { 'color': 'black' }

        //             },
        //             subtitle: {
        //                 text: '{{completed_weekly}}',
        //                 align: 'center',
        //                 verticalAlign: 'middle',
        //                 style: { "fontSize": "10em", 'color': 'black' },
        //                 y: 15
        //             },
        //             credits: { enabled: false },

        //         });
        //   });

        //   $(document).ready(function() {

        //     var chart = new Highcharts.Chart({
        //             chart: {
        //                 renderTo: 'completed_monthly_container',
        //                 type: 'pie',
        //                 backgroundColor:'transparent',

        //             },
        //             plotOptions: {
        //                 pie: {
        //                     innerSize: '70%'
        //                 }
        //             },
        //             title: {
        //                 text: 'Issues Resolved in the past 28 days:',
        //                 style: { 'color': 'black' }

        //             },
        //             subtitle: {
        //                 text: '{{completed_monthly}}',
        //                 align: 'center',
        //                 verticalAlign: 'middle',
        //                 style: { "fontSize": "10em", 'color': 'black' },
        //                 y: 15
        //             },
        //             credits: { enabled: false },

        //         });
        //   });
</script>

{% endblock %}